/* email:abner_yc@foxmail.com   date : 2015-09-28 11:23:07 */
(function($){$.fn.cygrade=function(options){var defaults={id:"cy_grade",title:"",num:0,maxnum:5,complete:$.noop};$this=$(this);var options=$.extend(defaults,options);var num=options.num||parseInt(options.num);var maxnum=options.maxnum||parseInt(options.maxnum);if(num>maxnum){options.num=maxnum}if(num<1){options.num=0}var html=genHTML(options);$this.html(html);var $cygrade=$this.find("#"+options.id);if(options.num<1||parseInt(options.num)<1){addEvent($cygrade.find("a"),options)}else{$cygrade.find("a").each(function(){var curgrade=options.num||parseInt(options.num);var n=$(this).attr("number");n=parseInt(n);if(n<=curgrade){$(this).removeAttr("select");$(this).addClass("active")}})}};function genHTML(opts){var html="<div class='grade_wrap' id='"+opts.id+"'>";html+="<span class='title'>"+opts.title+"</span>";for(var i=0;i<opts.maxnum;i++){html+="<a href='javascript:void(0);' number='"+(i+1)+"'></a>"}html+="<span class='number'>"+opts.num+"</span>";return html}function addEvent(obj,opts){obj.hover(function(){$this=$(this);var curgrade=$this.attr("number");curgrade=parseInt(curgrade);$this.parent().find(".number").html($this.attr("number"));$this.parent().find("a").each(function(){var n=$(this).attr("number");n=parseInt(n);if(n<=curgrade){$(this).removeAttr("select");$(this).addClass("active")}})},function(){$this=$(this);var num=$this.parent().find("a[select='true']").attr("number");if(undefined==num){$this.parent().find("a").removeClass("active");$this.parent().find(".number").html(opts.num)}});obj.click(function(){$this=$(this);$this.attr("select","true");$this.parent().find("a").unbind();$this.parent().find(".number").html($this.attr("number"));if(opts.complete){opts.complete($this.attr("number"))}})}})(jQuery);